- 写在前面：

```
分销的应用非常广泛，对商业流动促进有着极大的推动力，所以大部分的平台都要做一套分销系统。具体什么是分销，建议大家先度娘普及。1
```

- 设计目标：

```
业务目标：
    1.系统角色：货主，各级分销商(定三级)，微信用户，购买者
    2.货主可以将自己的商品上架
    3.货主可以设置通用分销比例
    4.货主可以发展一级分销商并设置分销比例(通用分销比例)
    5.货主可以设置商品的分销比例(商品分销比例)
    6.分销优先级 商品>通用
    7.一级分销商可以发展二级，二级分销商可以发展三级，三级不可以发展分销商
    8.微信用户转发商品链接被其他用户进入购买则发彩蛋给分享用户(可以不加。。个人觉得这样的彩蛋特别好)

技术目标：
    1.分销关系的存储
    2.水平可扩展
    3.服务的单一性保证
    4.非阻塞服务异步化123456789101112131415
```

- 技术实现：

```
1.表设计：
    分销关系表：存储分销者的关系(树形关系)
    分销订单表：记录各个角色的分红信息
    通用分销规则表：记录分销商设置的分销规则
    商品分销规则表：记录分销商设置的商品分销规则
    以上表依赖：
    用户表，商品表
2.服务设计：
    依赖服务：
        1.用户服务
        2.订单服务
        3.商品服务
        4.钱包服务
    服务性质：
        非阻塞异步调用类服务，实现方案定为接受支付成功消息后异步执行123456789101112131415
```

- 常见场景：

```
1.货主上架商品，设置商品性质为可分销，设置该商品分销比例
2.货主发展一级分销商，一级分销商以商品维度绑定货主
3.二级分销商发展三级分销商
4.货主管理一级分销商，一级分销商管理二级分销商，二级分销商管理三级分销商1234
```

- 主要流程：

```
1.用户购买商品并支付成功
2.发通知订单支付成功
3.查询订单内的商品和数量
4.查询各个商品的分销规则，没有商品分销规则的则查询通用分销规则
5.查询订单的分销者信息，确定分销者的分销级别
6.计算各级分销者应得，生成分销订单
7.解析为钱包操作透传给钱包服务进行入账1234567
```

- 总结： 
  分销系统的重点在于，分销者关系和分销规则。